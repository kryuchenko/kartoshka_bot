# Kartoshka Bot (–ë–æ—Ç-–ö–∞—Ä—Ç–æ—à–∫–∞) ü•î

[![Tests](https://github.com/kryuchenko/kartoshka_bot/actions/workflows/tests.yml/badge.svg)](https://github.com/kryuchenko/kartoshka_bot/actions/workflows/tests.yml)
[![Coverage](https://img.shields.io/badge/Coverage-66%25-yellow)](https://github.com/kryuchenko/kartoshka_bot/actions/workflows/tests.yml)

## –û –±–æ—Ç–µ

Kartoshka Bot ‚Äî —ç—Ç–æ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –º–µ–º–æ–≤ –≤ –≤–∞—à–µ–º —á–∞—Ç–µ. –û–Ω —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –º–µ–º–æ–≤ –ø—Ä–æ—Å—Ç—ã–º, –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –∏ –≤–µ—Å–µ–ª—ã–º!

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:

- **–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º (–ï–¥–∏–Ω–æ–ª–∏—á–Ω—ã–π –£–∑—É—Ä–ø–∞—Ç–æ—Ä)**: —Ä–µ—à–µ–Ω–∏—è –æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –º–µ–º–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –µ–¥–∏–Ω–æ–ª–∏—á–Ω—ã–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä.
- **–ö—Ä–∏–ø—Ç–æ—Å–µ–ª–µ–∫—Ç–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –æ–ª–∏–≥–∞—Ä—Ö–∏—è**: —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ –≥—Ä—É–ø–ø–æ–π —Ç–∞–π–Ω—ã—Ö –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ (–∫—Ä–∏–ø—Ç–æ—Å–µ–ª–µ–∫—Ç–∞—Ä—Ö–æ–≤), –∏ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –º–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üìù –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ –∏ GIF-–º–µ–º–æ–≤
- üé≠ –î–≤–∞ —Ä–µ–∂–∏–º–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:
  - üë§ –û—Ç —Å–≤–æ–µ–≥–æ –∏–º–µ–Ω–∏ (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∞)
  - ü•î –ê–Ω–æ–Ω–∏–º–Ω–æ (–æ—Ç –∏–º–µ–Ω–∏ "–ö–∞—Ä—Ç–æ—à–∫–∏")
- üë• –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:
  - **–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º**: –º–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω–æ–ª–∏—á–Ω—ã–º –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º
  - **–ö—Ä–∏–ø—Ç–æ—Å–µ–ª–µ–∫—Ç–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –æ–ª–∏–≥–∞—Ä—Ö–∏—è**: —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ –≥—Ä—É–ø–ø–æ–π –∫—Ä–∏–ø—Ç–æ—Å–µ–ª–µ–∫—Ç–∞—Ä—Ö–æ–≤
- ‚ö° –°–∏—Å—Ç–µ–º–∞ —Å—Ä–æ—á–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:
  - –ö—Ä–∏–ø—Ç–æ—Å–µ–ª–µ–∫—Ç–∞—Ä—Ö–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–°—Ä–æ—á–Ω–æ" –¥–ª—è –≤–∞–∂–Ω—ã—Ö –º–µ–º–æ–≤
  - –ï—Å–ª–∏ 51% –∏ –±–æ–ª–µ–µ –æ—Ç —Ç—Ä–µ–±—É–µ–º–æ–≥–æ —á–∏—Å–ª–∞ –≥–æ–ª–æ—Å–æ–≤ "–°—Ä–æ—á–Ω–æ" - –º–µ–º –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
  - –ù–∞–ø—Ä–∏–º–µ—Ä: –ø—Ä–∏ —Ç—Ä–µ–±—É–µ–º—ã—Ö 3 –≥–æ–ª–æ—Å–∞—Ö –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 —Å—Ä–æ—á–Ω—ã—Ö (3 √ó 0.51 ‚âà 1.53, –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –≤–≤–µ—Ä—Ö –¥–æ 2)
  - –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Ä–æ—á–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤ –º–µ–º –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ –æ–±—â–µ–π –æ—á–µ—Ä–µ–¥–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤: –û–¥–æ–±—Ä. / –°—Ä–æ—á–Ω–æ / –û—Ç–∫–ª.
- üìä –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–∏–¥–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è —Å –æ–±–Ω–æ–≤–ª—è–µ–º–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üè∑Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–µ–º–æ–≤ (—Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏ –º–µ–¥–∏–∞)
- ‚ú® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–æ–≤ –æ —Å—Ç–∞—Ç—É—Å–µ –∏—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- üì¢ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞ –±–æ—Ç–∞

---

## –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ—Ç–∞

### 1. –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:
   ```bash
   git clone git@github.com:kryuchenko/kartoshka_bot.git
   cd kartoshka_bot
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`**:
   - –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:
     ```env
     BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
     EDITOR_IDS=123456789
     PUBLISH_CHAT_ID=-100123456789
     BOT_NAME="–ö–∞—Ä—Ç–æ—à–∫–∞ –ë–æ—Ç"
     POST_FREQUENCY_MINUTES=180
     CRYPTOSELECTARCHY=true
     VOTES_TO_APPROVE=3
     VOTES_TO_REJECT=3
     ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏**:
   ```bash
   sudo ./setup_kartoshka_service.sh
   ```
   –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`venv`) –∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`.
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç `systemd` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º.
   - –ó–∞–ø—É—Å—Ç–∏—Ç –∏ –≤–∫–ª—é—á–∏—Ç –±–æ—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã.

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã**:
   ```bash
   sudo systemctl status kartoshka_bot
   ```
   –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ —Å–ª—É–∂–±–∞ –∞–∫—Ç–∏–≤–Ω–∞.

---

### 2. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

1. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**:
   ```bash
   source venv/bin/activate
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é**:
   ```bash
   python3 kartoshka_bot.py
   ```

3. –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C`.

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º —á–µ—Ä–µ–∑ systemd

- **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞**:
  ```bash
  sudo systemctl restart kartoshka_bot
  ```

- **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞**:
  ```bash
  sudo systemctl stop kartoshka_bot
  ```

- **–û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫**:
  ```bash
  sudo systemctl disable kartoshka_bot
  ```

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:

```
–í–∞—à –º–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.
[–ö–Ω–æ–ø–∫–∞]: –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ: (‚úÖ 2 | ‚ö° 1 | ‚ùå 2)
```

–ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è:
```
–í–∞—à –º–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.
[–ö–Ω–æ–ø–∫–∞]: ‚úÖ –û–¥–æ–±—Ä–µ–Ω (‚úÖ 3 | ‚ö° 0 | ‚ùå 2) ‚Ä¢ –ü—É–±–ª–∏–∫–∞—Ü–∏—è: 15:30 UTC
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- üõ°Ô∏è –ó–∞—â–∏—Ç–∞ —á–∞—Ç–∞ –æ—Ç –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- üéØ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤  
- üí´ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–æ–Ω–∏–º–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- üë• –í—ã–±–æ—Ä –º–µ–∂–¥—É –µ–¥–∏–Ω–æ–ª–∏—á–Ω–æ–π –∏ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π
- üìä –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –≤–∏–¥–∂–µ—Ç–æ–º
- üì± –ß–∏—Å—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π
- üè∑Ô∏è –ï–¥–∏–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–µ–º–æ–≤
- üó≥Ô∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢–µ—Å—Ç—ã

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 66%, –∞ –∫–ª–∞—Å—Å—ã DummyMessage –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã –Ω–∞ 100%.

1. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã**:
   - `test_caption.py` - —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–µ–π –∫ –º–µ–º–∞–º
   - `test_user_widget.py` - —Ç–µ—Å—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   
2. **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
   - `test_dataflow.py` - —Ç–µ—Å—Ç—ã –≤—Å–µ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –º–µ–º–∞ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:
     - –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–º–∞ (—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ/—Å —Ñ–æ—Ç–æ, –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ/–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
     - –ü—Ä–æ—Ü–µ—Å—Å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, —Ä–µ—à–µ–Ω–∏—è –æ–± –æ–¥–æ–±—Ä–µ–Ω–∏–∏/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏)
     - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–æ—á–µ—Ä–µ–¥—å, —Å—Ä–æ—á–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è)
     - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–∏–¥–∂–µ—Ç

3. **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**:
   - `test_user_widget_simple.py` - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –≤–∏–¥–∂–µ—Ç–∞
   - `test_user_widget_visual.py` - –≤–∏–∑—É–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤–∏–¥–∂–µ—Ç–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–í—Å–µ —Ç–µ—Å—Ç—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏:

```bash
# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
python -m pytest test_caption.py -v
python -m pytest test_user_widget.py -v

# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
python -m pytest test_dataflow.py -v

# –¢–µ—Å—Ç—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ DummyMessage (—Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ —Ç–µ—Å—Ç—ã)
python -m pytest test_kartoshka_bot.py -k "test_dummy_message or test_serialize or test_deserialize" -v

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
# –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ –≤—Å–µ–º–∏ —Ç–µ—Å—Ç–∞–º–∏
python -m pytest --cov=kartoshka_bot --cov-report=term-missing test_*.py

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã DummyMessage –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
python -m pytest --cov=kartoshka_bot.DummyMessage --cov=kartoshka_bot.serialize_message --cov=kartoshka_bot.deserialize_message test_kartoshka_bot.py -k "test_dummy_message or test_serialize or test_deserialize"
```

### –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `.github/workflows/tests.yml`.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –±–µ–π–¥–∂–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞

–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –±–µ–π–¥–∂–∞ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. –°–æ–∑–¥–∞—Ç—å GitHub Gist —Å –ª—é–±—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
2. –ü–æ–ª—É—á–∏—Ç—å ID Gist (–ø–æ—Å–ª–µ–¥–Ω—è—è —á–∞—Å—Ç—å URL, –Ω–∞–ø—Ä–∏–º–µ—Ä: `bc9c19eda4b6ee92a19d17f4d02ffbea`)
3. –°–æ–∑–¥–∞—Ç—å Personal Access Token —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ gist –≤ [–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö GitHub](https://github.com/settings/tokens)
4. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç `GIST_SECRET` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (Settings > Secrets and variables > Actions > New repository secret)
5. –û–±–Ω–æ–≤–∏—Ç—å `gistID` –≤ —Ñ–∞–π–ª–µ `.github/workflows/tests.yml` –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –±–µ–π–¥–∂ –≤ README.md

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –±–µ–π–¥–∂ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤.

---

–° –ª—é–±–æ–≤—å—é –∫ –º–µ–º–∞–º –∏ –∫–∞—Ä—Ç–æ—à–∫–µ! ü•î‚ú®
